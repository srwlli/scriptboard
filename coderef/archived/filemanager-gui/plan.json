{
  "feature_name": "filemanager-gui",
  "workorder_id": "WO-FILEMAN-001",
  "description": "Integrate fileman utility into Scriptboard as a GUI tool with all improvements",
  "created": "2025-12-14",
  "status": "pending",
  "phases": [
    {
      "id": "phase_1",
      "name": "Backend Core",
      "status": "pending",
      "tasks": [
        {
          "id": "TASK-001",
          "description": "Create backend/fileman/ module structure",
          "status": "pending",
          "files": ["backend/fileman/__init__.py"]
        },
        {
          "id": "TASK-002",
          "description": "Create core.py with improved fileman logic (parallel hashing, filters, trash)",
          "status": "pending",
          "files": ["backend/fileman/core.py"]
        },
        {
          "id": "TASK-003",
          "description": "Create schemas.py with Pydantic models",
          "status": "pending",
          "files": ["backend/fileman/schemas.py"]
        },
        {
          "id": "TASK-004",
          "description": "Create router.py with FastAPI endpoints",
          "status": "pending",
          "files": ["backend/fileman/router.py"]
        },
        {
          "id": "TASK-005",
          "description": "Add send2trash to requirements.txt",
          "status": "pending",
          "files": ["backend/requirements.txt"]
        },
        {
          "id": "TASK-006",
          "description": "Wire router into api.py",
          "status": "pending",
          "files": ["backend/api.py"]
        }
      ]
    },
    {
      "id": "phase_2",
      "name": "Frontend Foundation",
      "status": "pending",
      "tasks": [
        {
          "id": "TASK-007",
          "description": "Add FileManager types/methods to api.ts",
          "status": "pending",
          "files": ["frontend/src/lib/api.ts"]
        },
        {
          "id": "TASK-008",
          "description": "Create FileManager.tsx with tab structure",
          "status": "pending",
          "files": ["frontend/src/components/FileManager.tsx"]
        },
        {
          "id": "TASK-009",
          "description": "Create ActionPreviewTable.tsx (reusable)",
          "status": "pending",
          "files": ["frontend/src/components/filemanager/ActionPreviewTable.tsx"]
        },
        {
          "id": "TASK-010",
          "description": "Create OrganizePanel.tsx",
          "status": "pending",
          "files": ["frontend/src/components/filemanager/OrganizePanel.tsx"]
        },
        {
          "id": "TASK-011",
          "description": "Add FileManager to test page",
          "status": "pending",
          "files": ["frontend/src/app/test/page.tsx"]
        }
      ]
    },
    {
      "id": "phase_3",
      "name": "Remaining Panels",
      "status": "pending",
      "tasks": [
        {
          "id": "TASK-012",
          "description": "Create RenamePanel.tsx with regex/prefix/suffix options",
          "status": "pending",
          "files": ["frontend/src/components/filemanager/RenamePanel.tsx"]
        },
        {
          "id": "TASK-013",
          "description": "Create CleanPanel.tsx with trash vs delete toggle",
          "status": "pending",
          "files": ["frontend/src/components/filemanager/CleanPanel.tsx"]
        },
        {
          "id": "TASK-014",
          "description": "Create IndexPanel.tsx with SSE progress",
          "status": "pending",
          "files": ["frontend/src/components/filemanager/IndexPanel.tsx"]
        },
        {
          "id": "TASK-015",
          "description": "Create DupesPanel.tsx with SSE progress and group display",
          "status": "pending",
          "files": ["frontend/src/components/filemanager/DupesPanel.tsx"]
        },
        {
          "id": "TASK-016",
          "description": "Create UndoPanel.tsx with history list",
          "status": "pending",
          "files": ["frontend/src/components/filemanager/UndoPanel.tsx"]
        },
        {
          "id": "TASK-017",
          "description": "Create ProgressIndicator.tsx for SSE operations",
          "status": "pending",
          "files": ["frontend/src/components/filemanager/ProgressIndicator.tsx"]
        }
      ]
    },
    {
      "id": "phase_4",
      "name": "Polish",
      "status": "pending",
      "tasks": [
        {
          "id": "TASK-018",
          "description": "Add error handling edge cases",
          "status": "pending",
          "files": []
        },
        {
          "id": "TASK-019",
          "description": "Build frontend and test",
          "status": "pending",
          "files": []
        },
        {
          "id": "TASK-020",
          "description": "Package Electron exe",
          "status": "pending",
          "files": []
        }
      ]
    }
  ],
  "key_features": {
    "parallel_processing": "Backend uses ThreadPoolExecutor for file hashing",
    "progress_bar": "SSE stream to ProgressIndicator component",
    "undo": "Stores actions in session, UndoPanel reverses",
    "exclusion_filters": "Text input with comma-separated patterns",
    "empty_dir_cleanup": "Checkbox option in Organize/Clean panels",
    "os_trash": "Default in Clean panel, toggle for permanent delete",
    "preview_apply": "All panels: Preview button -> table -> Apply button"
  },
  "architecture": {
    "backend": {
      "module": "backend/fileman/",
      "files": ["__init__.py", "core.py", "schemas.py", "router.py"],
      "endpoints": [
        "POST /fileman/organize",
        "POST /fileman/rename",
        "POST /fileman/clean",
        "GET /fileman/index/stream (SSE)",
        "GET /fileman/dupes/stream (SSE)",
        "POST /fileman/undo"
      ]
    },
    "frontend": {
      "main_component": "FileManager.tsx",
      "panels": [
        "OrganizePanel.tsx",
        "RenamePanel.tsx",
        "CleanPanel.tsx",
        "IndexPanel.tsx",
        "DupesPanel.tsx",
        "UndoPanel.tsx"
      ],
      "shared": ["ActionPreviewTable.tsx", "ProgressIndicator.tsx"]
    }
  }
}
